---
title: "beta_dissimilarity_and_co"
author: "RÃ©mi"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
library(NetworkEnvGradGeneration)
library(ade4)
library(ggplot2)
# getwd()
```



# Network generation

```{r}
nb_frame <- 5; env_grad_max = 10
spe_resource <- 50; spe_consum <- 50
mean_tol_env = 2; sd_tol_env = 4
simulated_network <- env_grad_netw(nb_resource =spe_resource , nb_consumer = spe_consum,
                                   nb_location = nb_frame, env_grad_max = env_grad_max,
                                   know_env_grad_pos = T, ninter = 500, 
                                   mean_tol = 15,
                                   mean_tol_env = mean_tol_env, sd_tol_env = sd_tol_env,
                                   delta = 1)

row.names(simulated_network$abudance$abundance_resource) <- paste0("site",1:nb_frame)
row.names(simulated_network$abudance$abundance_consumer) <- paste0("site",1:nb_frame)
```

```{r}
table.value(simulated_network$obs_network[[2]])
```

## Visualize the connected components

```{r}
library(igraph)
for (i in c(1:nb_frame)){
  plot(graph_from_incidence_matrix(simulated_network$obs_network[[i]][which(rowSums(simulated_network$obs_network[[i]]) != 0), which(colSums(simulated_network$obs_network[[i]]) != 0)]))
}

```

# Dissimilartity

$\beta_{ST}$ = species tunrnover
$\beta_{OS}$ = changing interactions among species shared among sites $\Leftrightarrow$ rewiring

"The latter makes a strong case for using network approaches and investing the enormous effort in empirically recording interactions, as it highlights that knowing which species are there may not allow to predict interactions in a simple way (Poisot et al. 2015) and that interactions may be lost without losing species (Tylianakis et al. 2010)." (Frund 2021)

In this case, we mainly suggested that it would be due to a sampling bias and that the more species you are able to interact with, the higher the probability of randomly losing an interaction is when the sampling power is low







